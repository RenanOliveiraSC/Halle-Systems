<div id="wrapper" class="calendario" >
	<ng-include src="'menu.html'"></ng-include>
	<div id="page-wrapper">
		<div class="container-fluid" ng-controller="CalendarioController as calendario" id="controller">
			<div id='calendar'></div>
			
			<!-- Modal que abre quando clica em algum dia -->
			<div id="calendarModal" class="modal fade" >
				<div class="modal-dialog">
				    <div class="modal-content">
				        <div class="modal-header">
				            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-close"></i></button>
				            <h4 id="modalTitle" class="modal-title"></h4>
				        </div>
				        <div id="modalBody" class="modal-body"> </div>
				        <div class="modal-footer">
				            <button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
				        </div>
				    </div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	$(document).ready(function() {
		var today = new Date();
		var dd = today.getDate();
		var mm = today.getMonth()+1; //January is 0!
		var yyyy = today.getFullYear();

		if(dd<10) {
		    dd = '0'+dd;
		} 

		if(mm<10) {
		    mm = '0'+mm;
		} 

		today = mm + '/' + dd + '/' + yyyy;

		$('#calendar').fullCalendar({
			header: {
				left: 'prev,next today',
				center: 'title',
				right: 'month,agendaWeek,agendaDay'
			},
			defaultDate: today,
			selectable: true,
			selectHelper: true,
			select: function(start, end) {
				var day = moment(start).get('date');
				var month = moment(start).get('month')+1;
				var year = moment(start).get('year');
				if(day<10) {
					day = '0'+day;
				}
				if(month<10) {
					month = '0'+month;
				}
				angular.element('#controller').scope().calendario.carregarAgendamento(day+"/"+month+"/"+year);
				$('#calendarModal').modal();
			},
			editable: true,
			eventLimit: true, // allow "more" link when too many events
			eventClick:  function(event, jsEvent, view) {
	            $('#calendarModal').modal();
	        },
			events: [
				{
					title: 'All Day Event',
					start: '2017-09-01'
				},
				{
					title: 'Long Event',
					start: '2017-09-07',
					end: '2017-09-10'
				}
			]
		});
		
	});

</script>